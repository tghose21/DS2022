#!/bin/bash

curl -O https://s3.amazonaws.com/ds2002-resources/labs/lab3-bundle.tar.gz
tar -xzf lab3-bundle.tar.gz

# tr can remove spaces
cat lab3-bundle.tar.gz | tr -s '\n' > lab3-bundle.tar.gz

sed 's/'$'\t''/,/g' lab3-bundle.tar.gz > file.csv

#column_count=$(awk -F, 'NR==2 {print NF; exit}' file.csv)
column_count=$(head -n 2 file.csv | tail -n 1 | tr -cd ',' | wc -c)

echo "$column_count"

tar -czf converted-archive.tar.gz file.csv


